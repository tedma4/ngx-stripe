{"version":3,"file":"ngx-stripe.umd.js","sources":["../../src/modules/ngx-stripe.module.ts","../../src/components/stripe-card.component.ts","../../src/services/stripe.service.ts","../../src/interfaces/token.ts","../../src/interfaces/sources.ts","../../src/interfaces/stripe.ts","../../src/services/api-loader.service.ts","../../src/services/document-ref.ts","../../src/services/window-ref.ts"],"sourcesContent":["import { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { LazyStripeAPILoader } from '../services/api-loader.service';\nimport { StripeService } from '../services/stripe.service';\n\nimport { WindowRef } from '../services/window-ref';\nimport { DocumentRef } from '../services/document-ref';\n\nimport { Options, STRIPE_PUBLISHABLE_KEY, STRIPE_OPTIONS } from '../interfaces/stripe';\nimport { StripeCardComponent } from '../components/stripe-card.component';\n\nimport'rxjs/add/observable/combineLatest';\nimport'rxjs/add/observable/fromPromise';\n\nimport'rxjs/add/operator/switchMap';\nimport'rxjs/add/operator/filter';\nimport'rxjs/add/operator/map';\nexport class NgxStripeModule {\n/**\n * @param {?} publishableKey\n * @param {?=} options\n * @return {?}\n */\npublic static forRoot(publishableKey: string, options?: Options): ModuleWithProviders {\n    return {\n      ngModule: NgxStripeModule,\n      providers: [\n        LazyStripeAPILoader,\n        StripeService,\n        WindowRef,\n        DocumentRef,\n        {\n          provide: STRIPE_PUBLISHABLE_KEY,\n          useValue: publishableKey\n        },\n        {\n          provide: STRIPE_OPTIONS,\n          useValue: options\n        }\n      ]\n    };\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  declarations: [\n    StripeCardComponent\n  ],\n  exports: [\n    StripeCardComponent\n  ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction NgxStripeModule_tsickle_Closure_declarations() {\n/** @type {?} */\nNgxStripeModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nNgxStripeModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {\n  Component,\n  Input,\n  OnInit,\n  ViewChild,\n  ElementRef,\n  EventEmitter,\n  Output\n} from '@angular/core';\n\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Observable';\n\nimport { Element as StripeElement, ElementOptions } from '../interfaces/element';\nimport { StripeService } from '../services/stripe.service';\nimport { Elements, ElementsOptions } from '../interfaces/elements';\nexport class StripeCardComponent implements OnInit {\npublic onCard = new EventEmitter<StripeElement>();\nprivate card: ElementRef;\nprivate element: StripeElement;\n/**\n * @param {?} optionsIn\n * @return {?}\n */\nprivate set options(optionsIn: ElementOptions) {\n    this.options$.next(optionsIn);\n  }\nprivate options$ = new BehaviorSubject<ElementOptions>({});\n/**\n * @param {?} optionsIn\n * @return {?}\n */\nprivate set elementsOptions(optionsIn: ElementsOptions) {\n    this.elementsOptions$.next(optionsIn);\n  }\nprivate elementsOptions$ = new BehaviorSubject<ElementsOptions>({});\n/**\n * @param {?} stripeService\n */\nconstructor(private stripeService: StripeService) {}\n/**\n * @return {?}\n */\npublic ngOnInit() {\n    const /** @type {?} */ elements$: Observable<Elements> = this.elementsOptions$\n      .asObservable()\n      .switchMap((options) => {\n        if (Object.keys(options).length > 0) {\n          return this.stripeService.elements(options);\n        }\n        return this.stripeService.elements();\n      });\n    Observable\n      .combineLatest(\n        elements$,\n        this.options$.filter((options) => Boolean(options))\n      )\n      .subscribe(([elements, options]) => {\n        this.element = elements.create('card', options);\n        this.element.mount(this.card.nativeElement);\n\n        this.onCard.emit(this.element);\n      });\n  }\n/**\n * @return {?}\n */\npublic getCard(): StripeElement {\n    return this.element;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'ngx-stripe-card',\n  template: `<div class=\"field\" #card></div>`\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: StripeService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'onCard': [{ type: Output },],\n'card': [{ type: ViewChild, args: ['card', ] },],\n'options': [{ type: Input },],\n'elementsOptions': [{ type: Input },],\n};\n}\n\nfunction StripeCardComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nStripeCardComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStripeCardComponent.ctorParameters;\n/** @type {?} */\nStripeCardComponent.propDecorators;\n/** @type {?} */\nStripeCardComponent.prototype.onCard;\n/** @type {?} */\nStripeCardComponent.prototype.card;\n/** @type {?} */\nStripeCardComponent.prototype.element;\n/** @type {?} */\nStripeCardComponent.prototype.options$;\n/** @type {?} */\nStripeCardComponent.prototype.elementsOptions$;\n/** @type {?} */\nStripeCardComponent.prototype.stripeService;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable, Inject } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\n\nimport { WindowRef } from './window-ref';\nimport { LazyStripeAPILoader, Status } from './api-loader.service';\n\nimport { STRIPE_PUBLISHABLE_KEY, StripeJS, STRIPE_OPTIONS } from '../interfaces/stripe';\nimport { Element } from '../interfaces/element';\nimport { Elements, ElementsOptions } from '../interfaces/elements';\nimport {\n  SourceData,\n  SourceResult,\n  isSourceData,\n  SourceParams\n} from '../interfaces/sources';\nimport {\n  CardDataOptions,\n  TokenResult,\n  BankAccount,\n  BankAccountData,\n  PiiData,\n  Pii,\n  isBankAccount,\n  isBankAccountData,\n  isPii,\n  isPiiData,\n} from '../interfaces/token';\nexport class StripeService {\nprivate stripe: StripeJS;\n/**\n * @param {?} key\n * @param {?} options\n * @param {?} loader\n * @param {?} window\n */\nconstructor(\nprivate key: string,\nprivate options: string,\nprivate loader: LazyStripeAPILoader,\nprivate window: WindowRef) {\n    this.loader.asStream()\n      .filter((status: Status) => status.loaded === true)\n      .subscribe(() => {\n        const Stripe = (this.window.getNativeWindow() as any).Stripe;\n        this.stripe = this.options\n          ? Stripe(this.key, this.options) as StripeJS\n          : Stripe(this.key) as StripeJS;\n      });\n  }\n/**\n * @param {?=} options\n * @return {?}\n */\npublic elements(options?: ElementsOptions): Observable<Elements> {\n    return this.loader.asStream()\n      .filter((status: Status) => status.loaded === true)\n      .map(() => this.stripe.elements(options));\n  }\n/**\n * @param {?} a\n * @param {?} b\n * @return {?}\n */\npublic createToken(\n    a: Element | BankAccount | Pii,\n    b: CardDataOptions | BankAccountData | PiiData | undefined): Observable<TokenResult> {\n    if (isBankAccount(a) && isBankAccountData(b)) {\n      return Observable.fromPromise(this.stripe.createToken(a, b));\n    } else if (isPii(a) && isPiiData(b)) {\n      return Observable.fromPromise(this.stripe.createToken(a, b));\n    } else {\n      return Observable.fromPromise(this.stripe.createToken( /** @type {?} */((a as Element)), /** @type {?} */(( b as CardDataOptions | undefined))));\n    }\n  }\n/**\n * @param {?} a\n * @param {?=} b\n * @return {?}\n */\npublic createSource(a: Element | SourceData, b?: SourceData | undefined): Observable<SourceResult> {\n    if (isSourceData(a)) {\n      return Observable.fromPromise(this.stripe.createSource( /** @type {?} */((a as SourceData))));\n    }\n    return Observable.fromPromise(this.stripe.createSource( /** @type {?} */((a as Element)), b));\n  }\n/**\n * @param {?} source\n * @return {?}\n */\npublic retrieveSource(source: SourceParams): Observable<SourceResult> {\n    return Observable.fromPromise(this.stripe.retrieveSource(source));\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: undefined, decorators: [{ type: Inject, args: [STRIPE_PUBLISHABLE_KEY, ] }, ]},\n{type: undefined, decorators: [{ type: Inject, args: [STRIPE_OPTIONS, ] }, ]},\n{type: LazyStripeAPILoader, },\n{type: WindowRef, },\n];\n}\n\nfunction StripeService_tsickle_Closure_declarations() {\n/** @type {?} */\nStripeService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nStripeService.ctorParameters;\n/** @type {?} */\nStripeService.prototype.stripe;\n/** @type {?} */\nStripeService.prototype.key;\n/** @type {?} */\nStripeService.prototype.options;\n/** @type {?} */\nStripeService.prototype.loader;\n/** @type {?} */\nStripeService.prototype.window;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Error } from './utils';\n\nexport interface Token {\n  id: string;\n  object: 'token';\n  bank_account?: {\n    id: string;\n    country: string;\n    currency: string;\n    fingerprint: string;\n    object: 'bank_account';\n    account_holder_name: string;\n    account_holder_type: 'individual' | 'company';\n    bank_name: string;\n    last4: string;\n    routing_number: string;\n    status: 'new' | 'validated' | 'verified' | 'verification_failded' | 'errored';\n  };\n  card?: {\n    id: string;\n    country: string;\n    currency: string;\n    fingerprint: string;\n    object: 'card';\n    address_city: string;\n    address_country: string;\n    address_line1: string;\n    address_line1_check: FieldCheck;\n    address_line2: string;\n    address_state: string;\n    address_zip: string;\n    address_zip_check: FieldCheck;\n    brand: string;\n    cvc_check: FieldCheck;\n    dynamic_last4: string;\n    exp_month: number;\n    exp_year: number;\n    funding: 'credit' | 'debit' | 'prepaid' | 'unknown';\n    last4: string;\n    metadata: { [key: string ]: any };\n    name: string;\n    tokenization_method: 'apple_pay' | 'android_pay';\n  };\n  client_ip: string;\n  livemode: boolean;\n  type: 'card' | 'bank_account';\n  used: boolean;\n}\n\nexport type FieldCheck = 'pass' | 'fail' | 'unavailable' | 'unchecked';\n\nexport interface CardDataOptions {\n  name?: string;\n  address_line1?: string;\n  address_line2?: string;\n  address_city?: string;\n  address_state?: string;\n  address_zip?: string;\n  address_country?: string;\n  currency?: string;\n}\n\nexport interface TokenResult {\n  token?: Token;\n  error?: Error;\n}\n\nexport type BankAccount = 'bank_account';\n\nexport interface BankAccountData {\n  country: string;\n  currency: string;\n  routing_number: string;\n  account_number: string;\n  account_holder_name: string;\n  account_holder_type: 'individual' | 'company';\n}\n\nexport type Pii = 'pii';\n\nexport interface PiiData {\n  personal_id_number: string;\n}\n/**\n * @param {?} account\n * @return {?}\n */\nexport function isBankAccount(account: any): account is BankAccount {\n  return account === 'bank_account';\n}\n/**\n * @param {?} bankAccountData\n * @return {?}\n */\nexport function isBankAccountData(bankAccountData: any): bankAccountData is BankAccountData {\n  return 'country' in bankAccountData &&\n    'currency' in bankAccountData &&\n    'routing_number' in bankAccountData &&\n    'account_number' in bankAccountData &&\n    'account_holder_name' in bankAccountData &&\n    'account_holder_type' in bankAccountData &&\n    (bankAccountData.account_holder_type === 'individual' ||\n      bankAccountData.account_holder_type === 'company');\n}\n/**\n * @param {?} pii\n * @return {?}\n */\nexport function isPii(pii: any): pii is Pii {\n  return pii === 'pii';\n}\n/**\n * @param {?} piiData\n * @return {?}\n */\nexport function isPiiData(piiData: any): piiData is PiiData {\n  return 'personal_id_number' in piiData;\n}\n","import {  Error, Address } from './utils';\n\nexport interface Source {\n  id: string;\n  object: 'source';\n  amount: number;\n  client_secret: string;\n  code_verification?: {\n    attempts_remaining: number;\n    status: 'pending' | 'succeded' | 'failed';\n  };\n  created: number;\n  currency: string;\n  flow: FlowTypes;\n  livemode: boolean;\n  metadata: { [key: string]: any };\n  owner: {\n    address: Address;\n    email: string;\n    name: string;\n    phone: string;\n    verified_address: Address;\n    verified_email: string;\n    verified_name: string;\n    verified_phone: string;\n  };\n  receiver: {\n    address: string;\n    amount_charged: number;\n    amount_received: number;\n    amount_returned: number;\n    redirect?: {\n      return_url: string;\n      status: 'pending' | 'succeeded' | 'failed';\n      url: string;\n    }\n  };\n  status: 'canceled' | 'chargeable' | 'consumed' | 'failed' | 'pending';\n  type: 'card' | 'three_d_secure' | 'giropay' | 'sepa_bit' | 'ideal' | 'sofort' | 'bancontact';\n  usage: UsageTypes;\n}\n\nexport type UsageTypes = 'reusable' | 'single_use';\nexport type FlowTypes = 'redirect' | 'receiver' | 'code_verification' | 'none';\n\nexport interface SourceParams {\n  id: string;\n  client_secret: string;\n}\n\nexport interface SourceData {\n  type: string;\n  amount?: number;\n  currency?: string;\n  flow?: FlowTypes;\n  metadata?: { [key: string]: any };\n  owner?: {\n    address?: Address,\n    email?: string,\n    name?: string,\n    phone?: string;\n  };\n  redirect?: {\n    [key: string]: any;\n    return_url: string;\n  };\n  token?: string;\n  usage?: UsageTypes;\n}\n/**\n * @param {?} sourceData\n * @return {?}\n */\nexport function isSourceData(sourceData: any): sourceData is SourceData {\n  return 'type' in sourceData;\n}\n\nexport interface SourceResult {\n  source?: Source;\n  error?: Error;\n}\n","import { InjectionToken } from '@angular/core';\n\nimport { Elements, ElementsOptions } from './elements';\nimport { Element } from './element';\nimport { CardDataOptions, TokenResult, BankAccount, BankAccountData, Pii, PiiData } from './token';\nimport { SourceData, SourceResult, SourceParams } from './sources';\n\nexport const /** @type {?} */ STRIPE_PUBLISHABLE_KEY = new InjectionToken<string>('Stripe Publishable Key');\nexport const /** @type {?} */ STRIPE_OPTIONS = new InjectionToken<Options>('Stripe Options');\n\nexport interface StripeJS {\n  elements(options?: ElementsOptions): Elements;\n  createToken(el: Element, cardData?: CardDataOptions): Promise<TokenResult>;\n  createToken(account: BankAccount, bankAccountData: BankAccountData): Promise<TokenResult>;\n  createToken(pii: Pii, piiData: PiiData): Promise<TokenResult>;\n  createSource(el: Element, sourceData?: SourceData): Promise<SourceResult>;\n  createSource(sourceData: SourceData): Promise<SourceResult>;\n  retrieveSource(source: SourceParams): Promise<SourceResult>;\n}\n\nexport interface Options {\n  stripeAccount?: string;\n}\n","import { Injectable } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n\nimport { WindowRef } from './window-ref';\nimport { DocumentRef } from './document-ref';\n\nexport interface Status {\n  loaded: boolean;\n  loading: boolean;\n  error: boolean;\n}\nexport class LazyStripeAPILoader {\nprivate status: BehaviorSubject<Status> = new BehaviorSubject<Status>({\n    error: false,\n    loaded: false,\n    loading: false\n  });\n/**\n * @param {?} window\n * @param {?} document\n */\nconstructor(\nprivate window: WindowRef,\nprivate document: DocumentRef) {}\n/**\n * @return {?}\n */\npublic asStream(): Observable<Status> {\n    this.load();\n    return this.status.asObservable();\n  }\n/**\n * @return {?}\n */\npublic isReady(): boolean {\n    return this.status.getValue().loaded;\n  }\n/**\n * @return {?}\n */\npublic load() {\n    if (this.window.getNativeWindow().hasOwnProperty('Stripe')) {\n      this.status.next({\n        error: false,\n        loaded: true,\n        loading: false\n      });\n    } else {\n      if (!this.status.getValue().loaded && !this.status.getValue().loading) {\n        this.status.next({\n          ...this.status.getValue(),\n          loading: true\n        });\n\n        const /** @type {?} */ script = this.document.getNativeDocument().createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.defer = true;\n        script.src = 'https://js.stripe.com/v3/';\n\n        script.onload = () => {\n          this.status.next({\n            error: false,\n            loaded: true,\n            loading: false\n          });\n        };\n\n        script.onerror = () => {\n          this.status.next({\n            error: true,\n            loaded: false,\n            loading: false\n          });\n        };\n\n        this.document.getNativeDocument().body.appendChild(script);\n      }\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: WindowRef, },\n{type: DocumentRef, },\n];\n}\n\nfunction LazyStripeAPILoader_tsickle_Closure_declarations() {\n/** @type {?} */\nLazyStripeAPILoader.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nLazyStripeAPILoader.ctorParameters;\n/** @type {?} */\nLazyStripeAPILoader.prototype.status;\n/** @type {?} */\nLazyStripeAPILoader.prototype.window;\n/** @type {?} */\nLazyStripeAPILoader.prototype.document;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","\nexport class DocumentRef {\n/**\n * @return {?}\n */\npublic getNativeDocument(): Document {\n    return document;\n  }\n}\n","\nexport class WindowRef {\n/**\n * @return {?}\n */\npublic getNativeWindow(): Window {\n    return window;\n  }\n}\n"],"names":["NgModule","Input","ViewChild","Output","Component","Observable","BehaviorSubject","EventEmitter","Inject","Injectable","InjectionToken"],"mappings":"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"}